{% extends 'includes/layout.njk' %}
{% from 'components/button/macro.njk' import button %}
{% from '../../common/dashboard/components/dashboard-sectionGroup.njk' import dashboardSectionGroup %}
{% from '../../../common/components/error-summary/macro.njk' import errorSummary %}
{% from 'components/tag/macro.njk' import tag %}
{% from 'components/view-data-bulletlist/macro.njk' import viewDataBulletlist %}

{% block body %}
<div data-test-id="dashboard">
  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">
      {% if (errors.length > 0) %}
        {{ errorSummary({
          errors: errors
        }) }}
      {% endif %}
    </div>
    <div class="nhsuk-grid-column-two-thirds">

      {{ tag({
        text: 'Supplier name',
        classes: 'nhsuk-u-margin-bottom-5 bc-c-tag-outline'
      }) }}

      <div class="nhsuk-u-margin-top-5 nhsuk-u-margin-bottom-7">
        {% if title %}
          <h1 data-test-id="dashboard-title" class="nhsuk-u-margin-bottom-3">{{ name }} {{ title }}</h1>
        {% endif %}

        {% if mainAdvice %}
          <h2 data-test-id="dashboard-main-advice" class="nhsuk-u-font-size-22 nhsuk-u-margin-bottom-5">{{ mainAdvice }}</h2>
        {% endif %}

        {% if additionalAdvice %}
          <div data-test-id="dashboard-additional-advice" class="nhsuk-inset-text nhsuk-u-padding-top-2 nhsuk-u-padding-right-4 nhsuk-u-padding-bottom-2 nhsuk-u-padding-left-4 nhsuk-u-margin-top-5 nhsuk-u-margin-bottom-6">
            <span class="nhsuk-u-visually-hidden">Information: </span>
            <p class="nhsuk-u-font-size-14">{{ additionalAdvice }}</p>
          </div>
        {% endif %}

        <div data-test-id="dashboard-preview-button">
          {{ button({
            "text": "Preview your page",
            "classes": "nhsuk-button--secondary",
            "href": previewUrl
          }) }}
        </div>

      </div>

    </div>
    <div class="nhsuk-grid-column-full">

      {% for sectionGroup in sectionGroups %}
        {{ dashboardSectionGroup({
          sectionGroup: sectionGroup
        }) }}
      {% endfor %}

    </div>
    <div class="nhsuk-grid-column-two-thirds">

      {% if warningAdvice %}
        <div data-test-id="dashboard-warning-advice" class="nhsuk-inset-text nhsuk-u-padding-top-2 nhsuk-u-padding-right-4 nhsuk-u-padding-bottom-2 nhsuk-u-padding-left-4 nhsuk-u-margin-top-5 nhsuk-u-margin-bottom-6">
          <span class="nhsuk-u-visually-hidden">Information: </span>
          <p class="nhsuk-u-font-size-14">{{ warningAdvice }}</p>
        </div>
      {% endif %}

      <div class="nhsuk-u-margin-bottom-5" data-test-id="dashboard-submit-for-moderation-button">
        {{ button({
          "text": "Submit for moderation",
          "href": submitForModerationUrl
        }) }}
      </div>

      {% if sectionsBox %}
        <div data-test-id="dashboard-sections-box" class="bc-c-border-box nhsuk-u-padding-4 nhsuk-u-margin-bottom-5">
          <h3>{{ sectionsBox.title }}</h3>
          <p>{{ sectionsBox.mainAdvice }}</p>
          {{ viewDataBulletlist({
            data: sectionsBox.sections
          }) }}
        </div>
      {% endif %}

    </div>
  </div>
</div>
{% endblock %}
