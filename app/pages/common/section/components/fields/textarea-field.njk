{% from 'components/label/macro.njk' import label %}
{% from 'components/textarea/macro.njk' import textarea %}

{% macro textareaField(params) %}
  <div data-test-id="question-{{ params.question.id }}">
    {% if (params.question.error) %}
      <div data-test-id="textarea-field-error">
        {{ textarea({
          "id": params.question.id,
          "name": params.question.id,
          "label": {
            "text": params.question.mainAdvice,
            "classes": 'nhsuk-u-font-size-24 nhsuk-u-font-weight-bold nhsuk-u-margin-bottom-2'
          },
          "hint": {
            "text": params.question.additionalAdvice,
            "classes": 'nhsuk-u-margin-bottom-1'
          },
          "value": params.question.data,
          "rows": params.question.rows,
          "errorMessage": {
            "text": params.question.error.message
          },
          "formGroup": {
            "classes": "nhsuk-u-margin-bottom-2"
          }
        }) }}
      </div>
    {% else %}
      <div data-test-id="textarea-field">
        {{ textarea({
          "id": params.question.id,
          "name": params.question.id,
          "label": {
            "text": params.question.mainAdvice,
            "classes": 'nhsuk-u-font-size-24 nhsuk-u-font-weight-bold nhsuk-u-margin-bottom-2'
          },
          "hint": {
            "text": params.question.additionalAdvice,
            "classes": 'nhsuk-u-margin-bottom-3'
          },
          "value": params.question.data,
          "rows": params.question.rows,
          "formGroup": {
            "classes": "nhsuk-u-margin-bottom-2"
          }
        }) }}
      </div>
    {% endif %}
    <div data-test-id="textarea-field-footer">
      {{ label({
        "text": params.question.footerAdvice,
        "classes": "bc-c-field-footer"
      }) }}
    </div>
    <br/>
  </div>
{% endmacro %}
